<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="设计模式(一)"><meta name="keywords" content="设计模式,TypeScript"><meta name="author" content="琅琊旻"><meta name="copyright" content="琅琊旻"><title>设计模式(一) | 琅琊旻</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1150529212462758',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="http://ta.qq.com"><script>(function() {
   var hm = document.createElement("script");
   hm.src = "https://tajs.qq.com/stats?sId=66535930";
   var s = document.getElementsByTagName("script")[0];
   s.parentNode.insertBefore(hm, s);
 })();</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.2.0'
} </script><meta name="generator" content="Hexo 5.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#typescript%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text"> TypeScript简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8webpack%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text"> 采用webpack的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typescript-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text"> TypeScript 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8Bboolean"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 布尔类型(boolean)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8Bnumber"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 数值类型(number)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8Bstring"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 字符串类型(string)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8Barray"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 数组类型(array)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E7%B1%BB%E5%9E%8Btuple"><span class="toc-number">1.2.5.</span> <span class="toc-text"> 元组类型(tuple)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8Benum"><span class="toc-number">1.2.6.</span> <span class="toc-text"> 枚举类型(enum)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#never%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.7.</span> <span class="toc-text"> never类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E9%87%8D%E8%BD%BD"><span class="toc-number">1.3.</span> <span class="toc-text"> 函数的重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text"> 类的写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.5.</span> <span class="toc-text"> 接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99"><span class="toc-number">2.</span> <span class="toc-text"> 设计模式的基本原则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E8%B4%A3%E4%BB%BB%E5%8E%9F%E5%88%99"><span class="toc-number">2.1.</span> <span class="toc-text"> 单一责任原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99"><span class="toc-number">2.2.</span> <span class="toc-text"> 接口隔离原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99"><span class="toc-number">2.3.</span> <span class="toc-text"> 依赖倒转(倒置)原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E7%9A%84%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F%E8%BF%99%E4%B8%8D%E6%98%AF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8E%9F%E5%88%99"><span class="toc-number">2.4.</span> <span class="toc-text"> 依赖关系的传递方式(这不是设计模式原则)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99"><span class="toc-number">2.5.</span> <span class="toc-text"> 里氏替换原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99"><span class="toc-number">2.6.</span> <span class="toc-text"> 开闭原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99"><span class="toc-number">2.7.</span> <span class="toc-text"> 迪米特法则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text"> 开始设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text"> 单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text"> 工厂模式</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://blogimage.lemonlife.top/201910302316_962.jpg"></div><div class="author-info__name text-center">琅琊旻</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/wmwgithub">GitHub关注</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">40</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">17</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.dzou.top">Dzou's Blog</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://boyn.top">Boyn</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://www.parak.top/">ParaK</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://luo-xi.xyz/">洛臣心</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.uchihakakashi.top/">Uchkks's Blog</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://crassulalactea.github.io/">Crassula</a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">琅琊旻</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">类别</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">设计模式(一)</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-26</time></div><div class="article-container" id="post-content"><p>因为设计模式部分代码，可能需要用到接口等特性，因此需要使用TS,下面介绍一点TS基础的使用方法，对于可以用ES6实现的方式，我尽量采用ES6实现。23种设计模式,这一篇肯定写不完，前面都是基础准备，想节约时间的，可直接跳到<strong>开始设计模式那块</strong>,本篇只介绍了，单例模式和工厂模式</p>
<h2 id="typescript简单介绍"><a class="markdownIt-Anchor" href="#typescript简单介绍"></a> TypeScript简单介绍</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装或者更新ts</span></span><br><span class="line">npm install -g typescript</span><br><span class="line"><span class="comment"># 检测是否安装成功</span></span><br><span class="line">tsc -version</span><br><span class="line"><span class="comment"># 编写.ts文件， 运行以下命令将ts文件转换成js</span></span><br><span class="line"><span class="comment"># 运行对应js文件即可</span></span><br><span class="line">tsc [fileName].ts</span><br></pre></td></tr></table></figure>
<h3 id="采用webpack的方式"><a class="markdownIt-Anchor" href="#采用webpack的方式"></a> 采用webpack的方式</h3>
<blockquote>
<p>因为不想频繁的执行tsc命令自己搭建了，webpack的环境。<a target="_blank" rel="noopener" href="https://github.com/wmwgithub/typescript-design-mode/blob/master/webpack.config.js">配置链接</a>,clone下来项目后,在项目<code>src</code> 目录下编写对应ts代码即可,webpack会自动编译ts代码,<code>app.ts</code>是程序主入口。因此函数调用要在<code>app.ts</code>中运行。</p>
</blockquote>
<h3 id="typescript-数据类型"><a class="markdownIt-Anchor" href="#typescript-数据类型"></a> TypeScript 数据类型</h3>
<p>定义ts变量需要指定类型。或者会根据第一个赋值变量分配默认类型。未赋值变量默认类型为<code>any</code></p>
<h4 id="布尔类型boolean"><a class="markdownIt-Anchor" href="#布尔类型boolean"></a> 布尔类型(boolean)</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag:<span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// error code 不同类型不能赋值</span></span><br><span class="line">flag = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="数值类型number"><a class="markdownIt-Anchor" href="#数值类型number"></a> 数值类型(number)</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num:<span class="built_in">number</span> = <span class="number">123</span></span><br></pre></td></tr></table></figure>
<h4 id="字符串类型string"><a class="markdownIt-Anchor" href="#字符串类型string"></a> 字符串类型(string)</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str:<span class="built_in">string</span> = <span class="string">&quot;string&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="数组类型array"><a class="markdownIt-Anchor" href="#数组类型array"></a> 数组类型(array)</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:<span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<h4 id="元组类型tuple"><a class="markdownIt-Anchor" href="#元组类型tuple"></a> 元组类型(tuple)</h4>
<p>元组类型是数组类型的子集,元组不允许越界，每一个元祖类型都指定了一个数据类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:[<span class="built_in">number</span>,<span class="built_in">string</span>] = [<span class="number">1</span>,<span class="string">&#x27;str&#x27;</span>]</span><br><span class="line"><span class="comment">// error code 越界 左边类型长度为2 右边赋值长度为3</span></span><br><span class="line"><span class="keyword">let</span> arr:[<span class="built_in">number</span>,<span class="built_in">string</span>] = [<span class="number">1</span>,<span class="string">&#x27;str&#x27;</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<h4 id="枚举类型enum"><a class="markdownIt-Anchor" href="#枚举类型enum"></a> 枚举类型(enum)</h4>
<p>枚举中变量默认值是 按顺序赋值0,1,2 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span>,也可以给枚举中变量直接赋值,覆盖掉默认值。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Flag&#123;</span><br><span class="line">  success,</span><br><span class="line">  fail,</span><br><span class="line">  unknow = <span class="string">&#x27;unknow&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> success:Flag = Flag.success </span><br><span class="line"><span class="built_in">console</span>.log(success) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(Flag.fail) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(Flag.unknow) <span class="comment">// unknow</span></span><br></pre></td></tr></table></figure>
<h4 id="never类型"><a class="markdownIt-Anchor" href="#never类型"></a> never类型</h4>
<p>null和undefined,是never 类型的子集。还有一种是不会出现的类型,例如没有返回值的函数。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num:<span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"><span class="built_in">console</span>.log(num)  <span class="comment">// null</span></span><br><span class="line"><span class="keyword">let</span> unde:<span class="literal">undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(unde) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h3 id="函数的重载"><a class="markdownIt-Anchor" href="#函数的重载"></a> 函数的重载</h3>
<p>相同的函数名称，接收不同的参数，最后一个函数必须要给出函数的实现。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userInfo</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userInfo</span>(<span class="params">age: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userInfo</span>(<span class="params">info: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> info === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`my name is <span class="subst">$&#123;info&#125;</span>`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`my age is <span class="subst">$&#123;info&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(userInfo(<span class="string">&#x27;wmw&#x27;</span>))  <span class="comment">// my name is wmw</span></span><br><span class="line"><span class="built_in">console</span>.log(userInfo(<span class="number">18</span>)) <span class="comment">//  my age is 18</span></span><br></pre></td></tr></table></figure>
<h3 id="类的写法"><a class="markdownIt-Anchor" href="#类的写法"></a> 类的写法</h3>
<p>TS中类的写法大体上和ES6差不多,TS可以对类中变量，方法，指定私有还是公有的属性,在构造器中定义初始的变量时，要在构造器前声明一下变量,如果是继承类只需要声明自身独有的属性即可,继承自父类的属性可不必声明,下面对比一下两者的写法。</p>
<ul>
<li>ES6的写法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.x = x</span><br><span class="line">		<span class="built_in">this</span>.y = y</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> point = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">x, y, color</span>)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(x, y)</span><br><span class="line">		<span class="built_in">this</span>.color = color</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">static</span> world = <span class="string">&#x27;world&#x27;</span></span><br><span class="line">	hello = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">	<span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="built_in">this</span>.hello)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">static</span> <span class="function"><span class="title">time</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="built_in">this</span>.world)</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">Date</span>.now()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>TS的写法</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 在构造器前声明了x,y</span></span><br><span class="line">  x: <span class="built_in">number</span></span><br><span class="line">  y: <span class="built_in">number</span></span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">x:<span class="built_in">number</span>, y:<span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.x = x</span><br><span class="line">		<span class="built_in">this</span>.y = y</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> point = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 只需声明color,继承来的x,y不必声明</span></span><br><span class="line">  color: <span class="built_in">string</span></span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">x:<span class="built_in">number</span>, y:<span class="built_in">number</span>, color:<span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(x, y)</span><br><span class="line">		<span class="built_in">this</span>.color = color</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 可以指定变量为私有属性，(只是在写代码层面上报错)</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> world = <span class="string">&#x27;world&#x27;</span></span><br><span class="line">  <span class="keyword">private</span> hello = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.hello)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="title">time</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.world)</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">Date</span>.now()</span><br><span class="line">   &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h3>
<p>TS比ES6多提供了接口的功能,一个类要实现接口,必须要实现接口指定的属性和方法</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义人的接口，指定了名字，年龄，和爱好</span></span><br><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  name:<span class="built_in">string</span>,</span><br><span class="line">  age:<span class="built_in">number</span>,</span><br><span class="line">  hobby:<span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;,</span><br><span class="line">  sayHobby():<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据这个接口 定义一个类小明</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoMing</span> <span class="title">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  name: <span class="built_in">string</span>  </span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">  hobby: <span class="built_in">string</span>[]</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span>,age: <span class="built_in">number</span>,hobby: <span class="built_in">string</span>[]</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.name = name</span><br><span class="line">      <span class="built_in">this</span>.age = age</span><br><span class="line">      <span class="built_in">this</span>.hobby = hobby</span><br><span class="line">  &#125;</span><br><span class="line">  sayHobby(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`我喜欢,<span class="subst">$&#123;<span class="built_in">this</span>.hobby.join(<span class="string">&#x27;,&#x27;</span>)&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaoMing = <span class="keyword">new</span> XiaoMing(<span class="string">&#x27;xiaoming&#x27;</span>,<span class="number">18</span>,[<span class="string">&#x27;唱&#x27;</span>,<span class="string">&#x27;跳&#x27;</span>,<span class="string">&#x27;rap&#x27;</span>,<span class="string">&#x27;*球&#x27;</span>])</span><br></pre></td></tr></table></figure>
<h2 id="设计模式的基本原则"><a class="markdownIt-Anchor" href="#设计模式的基本原则"></a> 设计模式的基本原则</h2>
<p>之所以会有设计模式，很大程度上是为了代码的整洁性，重用性，可靠性，可扩展性，等等，总之你写的代码不仅仅是代码，更应该是一个工程，为了这个工程的未来，每个人都应该努力提高自己的代码质量。很多时候是和他人一起合作的工程。设计模式需要遵守的七大原则</p>
<ul>
<li>单一责任原则</li>
<li>接口隔离原则</li>
<li>依赖倒转(倒置)原则</li>
<li>里氏替换原则</li>
<li>开闭原则</li>
<li>迪米特法则</li>
<li>合成复用原则</li>
</ul>
<h3 id="单一责任原则"><a class="markdownIt-Anchor" href="#单一责任原则"></a> 单一责任原则</h3>
<blockquote>
<p>字面意思，一个类只负责一件事，尽量降低类的复杂度，更不可以把丝毫不相关的代码放在一个类中。</p>
</blockquote>
<ul>
<li>降低类或者方法的复杂度，</li>
<li>提代码可读性可维护性。</li>
<li>降低变更代码引起的风险。</li>
</ul>
<p>案例:指定一个交通工具类，类中，指定每种交通工具的运行途径，比如汽车陆地上，飞机空中等</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一的 run方法 很明显 ，把 飞机汽车的运行方式，放一起</span></span><br><span class="line"><span class="comment">// 不利于代码以后扩展</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params">vehicle,<span class="keyword">type</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(vehicle === <span class="string">&#x27;car&#x27;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;car在陆地上运行&quot;</span></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(vehicle === <span class="string">&#x27;aircraft&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;aircraft在空中运行&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决方法一 把各个功能不同的交通工具拆成不同类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoadVehicle</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params">vehicle</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vehicle + <span class="string">&#x27;在陆地上运行&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AirVehicle</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params">vehicle</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vehicle + <span class="string">&#x27;在空中运行&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 解决方法2 在方法层面上实现 单一原则</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params">vehicle</span>)</span>&#123;</span><br><span class="line">    retun vehicle + <span class="string">&quot;在陆地上运行&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">runAir</span>(<span class="params">vehicle</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vehicle + <span class="string">&quot;在空中运行&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口隔离原则"><a class="markdownIt-Anchor" href="#接口隔离原则"></a> 接口隔离原则</h3>
<blockquote>
<p>一个类 实现接口时，应该基于接口的最小接口，如果接口中含有大量他不需要的方法，应该拆分接口</p>
</blockquote>
<ul>
<li>减少不必要的代码。</li>
<li>代码逻辑关系更清晰,程序稳定性更好</li>
</ul>
<p>设计一个情形，B,D类 都实现了接口1,A,C通过接口依赖于B,D。但是A只需要接口中<code>operation1</code>,<code>operation2</code> 但是 C需要<code>operation1</code>,<code>operation2</code> 。 因此,如果只定义一个接口1，B,D中 都有不必要的代码。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Interface1 &#123;</span><br><span class="line">  operation1(): <span class="built_in">void</span>;</span><br><span class="line">  operation2(): <span class="built_in">void</span>;</span><br><span class="line">  operation3(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="title">implements</span> <span class="title">Interface1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> operation1(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;B实现了接口1&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> operation2(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;B实现了接口2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 不必要的代码</span></span><br><span class="line">  <span class="keyword">public</span> operation3(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;B实现了接口3&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="title">implements</span> <span class="title">Interface1</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 不必要的代码</span></span><br><span class="line">  <span class="keyword">public</span> operation1(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;D实现了接口1&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> operation2(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;D实现了接口2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> operation3(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;D实现了接口3&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> depend1(i: Interface1): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation1()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> depend2(i: Interface1): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation2()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> depend2(i: Interface1): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation2()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> depend3(i: Interface1): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation3()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Segregation</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> A()</span><br><span class="line">    a.depend1(<span class="keyword">new</span> B()) <span class="comment">//B实现了接口1</span></span><br><span class="line">    a.depend2(<span class="keyword">new</span> B()) <span class="comment">// B实现了接口2</span></span><br><span class="line">    <span class="keyword">let</span> c = <span class="keyword">new</span> C()</span><br><span class="line">    c.depend2(<span class="keyword">new</span> D()) <span class="comment">// D实现了接口2</span></span><br><span class="line">    c.depend3(<span class="keyword">new</span> D()) <span class="comment">// D实现了接口3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>改进之后</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Interface1 &#123;</span><br><span class="line">  operation1(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Interface2 &#123;</span><br><span class="line">  operation2(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Interface3 &#123;</span><br><span class="line">  operation3(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="title">implements</span> <span class="title">Interface1</span>, <span class="title">Interface2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> operation1(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;B实现了接口1&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> operation2(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;B实现了接口2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="title">implements</span> <span class="title">Interface2</span>, <span class="title">Interface3</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> operation2(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;D实现了接口2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> operation3(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;D实现了接口3&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> depend1(i: Interface1): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation1()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> depend2(i: Interface2): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation2()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> depend2(i: Interface2): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation2()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> depend3(i: Interface3): <span class="built_in">void</span> &#123;</span><br><span class="line">    i.operation3()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Segregation2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> A()</span><br><span class="line">    a.depend1(<span class="keyword">new</span> B()) <span class="comment">//B实现了接口1</span></span><br><span class="line">    a.depend2(<span class="keyword">new</span> B()) <span class="comment">// B实现了接口2</span></span><br><span class="line">    <span class="keyword">let</span> c = <span class="keyword">new</span> C()</span><br><span class="line">    c.depend2(<span class="keyword">new</span> D()) <span class="comment">// D实现了接口2</span></span><br><span class="line">    c.depend3(<span class="keyword">new</span> D()) <span class="comment">// D实现了接口3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设计接口的时候注意接口隔离，不要把，不同功能的接口放一起，以免实现代码的时候出现不必要的实现类代码。B,D实现类的代码,比之前减少了不必要的代码。</p>
<h3 id="依赖倒转倒置原则"><a class="markdownIt-Anchor" href="#依赖倒转倒置原则"></a> 依赖倒转(倒置)原则</h3>
<blockquote>
<p>高层模块不应该依赖底层模块，二者都应该依赖其抽象。抽象不应该依赖细节，细节应该依赖抽象。依赖倒转原则中心思想是面向接口编程。遵循里氏替换原则</p>
</blockquote>
<p>我们模拟一个人接收邮件，和接收消息的场景</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 完成Persion 接收消息的功能</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> receive(email: Email): <span class="built_in">void</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(email.getInfo())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Email</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> getInfo(): <span class="built_in">string</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;电子邮件信息 Hello World&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependecyInVersion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">      person.receive(<span class="keyword">new</span> Email())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>上面的案例实现思路,简单,比较容易想到,但是如果我们还需要接收微信,QQ,短的消息显得不好扩展</p>
<p>根据依赖倒转原则,我们应该引入一个IReceiver接口,表示接收者,这样Person类<br />
与接口IReceiver发生依赖,只要接口不变,Person无需改变,因为WeXin QQ等新都属接收业务范围,他们各自实现IReceiver接口就行。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependecyInVersion2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">    person.receive(<span class="keyword">new</span> Email())</span><br><span class="line">    person.receive(<span class="keyword">new</span> QQ())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义接收接口</span></span><br><span class="line"><span class="keyword">interface</span> IReceiver &#123;</span><br><span class="line">  getInfo(): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义Email消息</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Email</span> <span class="title">implements</span> <span class="title">IReceiver</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> getInfo(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;接收到 Email消息&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义QQ消息</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QQ</span> <span class="title">implements</span> <span class="title">IReceiver</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> getInfo(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;接收到 QQ消息&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 完成Persion 接收消息的功能,</span></span><br><span class="line"><span class="comment">// 无论上层增加接收什么类型的消息,Persion类无需改变</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 基于接口传递依赖关系</span></span><br><span class="line">  <span class="keyword">public</span> receive(receiver: IReceiver): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(receiver.getInfo())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="依赖关系的传递方式这不是设计模式原则"><a class="markdownIt-Anchor" href="#依赖关系的传递方式这不是设计模式原则"></a> 依赖关系的传递方式(这不是设计模式原则)</h3>
<p>为了实现接口分离，我们常常使用如下方式传递接口依赖关系。</p>
<ul>
<li>接口传递 (上面的案例就是基于接口传递依赖关系)</li>
<li>构造方法传递</li>
<li>setter方法传递</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义两个接口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Message &#123;</span><br><span class="line">  info(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IReceiver &#123;</span><br><span class="line">  getInfo(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>方式2 通过构造方法传递</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMessage</span> <span class="title">implements</span> <span class="title">Message</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> receiver!: IReceiver</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">receiver: IReceiver</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 基于构造方法 传递 </span></span><br><span class="line">    <span class="built_in">this</span>.receiver = receiver</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">info</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver.getInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> <span class="title">implements</span> <span class="title">IReceiver</span> </span>&#123;</span><br><span class="line">  getInfo(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&quot;我接收到消息啦~~&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependecyInVersion3</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="title">main</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> receiver = <span class="keyword">new</span> Receiver()</span><br><span class="line">    <span class="keyword">let</span> myMessage = <span class="keyword">new</span> MyMessage(receiver)</span><br><span class="line">    myMessage.info()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方式3 通过setter方法</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMessage</span> <span class="title">implements</span> <span class="title">Message</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> receiver!: IReceiver; <span class="comment">// TS要求添加 赋值断言</span></span><br><span class="line">  <span class="keyword">public</span> setReceive(rec: IReceiver): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver = rec</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">info</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver.getInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> <span class="title">implements</span> <span class="title">IReceiver</span> </span>&#123;</span><br><span class="line">  getInfo(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&quot;我接收到消息啦~~&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependecyInVersion3</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="title">main</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> myMessage = <span class="keyword">new</span> MyMessage()</span><br><span class="line">    myMessage.setReceive(<span class="keyword">new</span> Receiver())</span><br><span class="line">    myMessage.info()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="里氏替换原则"><a class="markdownIt-Anchor" href="#里氏替换原则"></a> 里氏替换原则</h3>
<p>使用继承的时候，应尽量遵循里氏替换原则,在<strong>子类中尽量不要重写父类方法</strong>。里氏替换原则告诉我们，继承实际上让两个类耦合度增强了，在适当情况下，可以通过，<strong>聚合，组合依赖来解决问题</strong>。抱歉这个暂时没有找到很好的例子。</p>
<h3 id="开闭原则"><a class="markdownIt-Anchor" href="#开闭原则"></a> 开闭原则</h3>
<blockquote>
<p>一个软件的类，模块和函数应该对扩展开发，对修改关闭。当软件需要变化时，尽量通过扩展软件实体行为来实现变化。而不是通过修改已有代码。</p>
</blockquote>
<p>我的定义一个画图的案例,在一个绘图的类中定义，绘制不同样子图形的情形，其实这边这个案例和第一种，单一责任原则有点类似了</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; log &#125; <span class="keyword">from</span> <span class="string">&#x27;util&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">OCP</span> </span>&#123;</span><br><span class="line"><span class="comment">// (使用方)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> graphiEditor = <span class="keyword">new</span> GraphiEditor()</span><br><span class="line">    graphiEditor.drawShape(<span class="keyword">new</span> Rectangle())</span><br><span class="line">    graphiEditor.drawShape(<span class="keyword">new</span> Circle())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供方</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GraphiEditor</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> drawShape(s: Shape): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.mType == <span class="number">1</span>) &#123;</span><br><span class="line">      log(<span class="string">&#x27;绘制矩形&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.mType == <span class="number">2</span>) &#123;</span><br><span class="line">      log(<span class="string">&#x27;绘制圆形&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 提供方</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> mType: <span class="built_in">number</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">mType: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.mType = mType</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方</span></span><br><span class="line"><span class="comment">// 画矩形的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">1</span>) <span class="comment">// mType = 1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用方</span></span><br><span class="line"><span class="comment">// 画圆形的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">2</span>) <span class="comment">// mType = 2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码如果想要新增画三角形的类,发现扩展改变比较大,提供方，使用方代码都需要改变。现在经过如下修改，去掉if,else的判断，根据开闭原则，把具体的实现，放到使用方每个子类中自己实现，这样，想新增三角形的时候。只要使用方自己实现了三角形。不需要动提供方的代码</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; log &#125; <span class="keyword">from</span> <span class="string">&#x27;util&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">OCP2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> main(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> graphiEditor = <span class="keyword">new</span> GraphiEditor()</span><br><span class="line">    graphiEditor.drawShape(<span class="keyword">new</span> Rectangle())</span><br><span class="line">    graphiEditor.drawShape(<span class="keyword">new</span> Circle())</span><br><span class="line">    graphiEditor.drawShape(<span class="keyword">new</span> Triangle())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供 方</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GraphiEditor</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> drawShape(s: Shape): <span class="built_in">void</span> &#123;</span><br><span class="line">    s.draw()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供方</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> draw(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用方</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> draw(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;绘制矩形&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> draw(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;绘制圆形&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 现在扩展三角形</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> draw(): <span class="built_in">void</span> &#123;</span><br><span class="line">    log(<span class="string">&#x27;绘制三角形&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="迪米特法则"><a class="markdownIt-Anchor" href="#迪米特法则"></a> 迪米特法则</h3>
<blockquote>
<p>高内聚，低耦合,尽量少对外暴露信息，一个类对自己依赖的类知道越少越好。类与类关系越密切，耦合度越大。越不利于代码更改。</p>
</blockquote>
<p>现在我们实现一个二叉搜索树并且二叉搜索树，提供了插入节点功能，和返回中序遍历（左节点-&gt;根节点-&gt;右节点）结果的功能</p>
<ul>
<li>不符合迪米特法则的实现</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">  val: <span class="built_in">number</span>;</span><br><span class="line">  left: <span class="literal">null</span> | TreeNode;</span><br><span class="line">  right: <span class="literal">null</span> | TreeNode;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">val:<span class="built_in">number</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val</span><br><span class="line">    <span class="built_in">this</span>.left = <span class="literal">null</span></span><br><span class="line">    <span class="built_in">this</span>.right = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义 二叉 搜索树</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BSTree</span></span>&#123;</span><br><span class="line"> tree: <span class="literal">null</span> | TreeNode;</span><br><span class="line"> <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.tree = <span class="literal">null</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 定义插入方法</span></span><br><span class="line"> <span class="function"><span class="title">insert</span>(<span class="params">node:TreeNode</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="built_in">this</span>.tree === <span class="literal">null</span>)&#123;</span><br><span class="line">     <span class="built_in">this</span>.tree = node</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> root = <span class="built_in">this</span>.tree</span><br><span class="line">     <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">         <span class="keyword">if</span>(node.val&gt;root.val)&#123;</span><br><span class="line">           <span class="keyword">if</span>(root.right === <span class="literal">null</span>)&#123;</span><br><span class="line">             root.right = node</span><br><span class="line">             <span class="keyword">break</span></span><br><span class="line">           &#125;</span><br><span class="line">           root = root.right</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">           <span class="keyword">if</span>(root.left === <span class="literal">null</span>)&#123;</span><br><span class="line">             root.left = node</span><br><span class="line">             <span class="keyword">break</span></span><br><span class="line">           &#125;</span><br><span class="line">           root = root.left</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">this</span>.tree</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">inOrder</span>(<span class="params">tree:TreeNode|<span class="literal">null</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res:<span class="built_in">number</span>[] = []</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">order</span>(<span class="params">tree:TreeNode|<span class="literal">null</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree === <span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> res     </span><br><span class="line">    &#125;</span><br><span class="line">    order(tree.left)</span><br><span class="line">    res.push(tree.val)</span><br><span class="line">    order(tree.right)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">   &#125;</span><br><span class="line">   order(tree)</span><br><span class="line">   <span class="keyword">return</span> res</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现一个二叉搜索树的功能</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demeter</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="title">main</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> bsTree = <span class="keyword">new</span> BSTree()</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">8</span>))</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">7</span>))</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">11</span>))</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">9</span>))</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">3</span>))</span><br><span class="line">      bsTree.insert(<span class="keyword">new</span> TreeNode(<span class="number">2</span>))</span><br><span class="line">      <span class="comment">// 放入的顺序[8,7,11,9,3,2]</span></span><br><span class="line">      <span class="keyword">let</span> res = bsTree.inOrder(bsTree.tree)</span><br><span class="line">      <span class="built_in">console</span>.log(res) <span class="comment">// [2, 3, 7, 8, 9, 11]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上述代码可以看出，用户在使用二叉搜索树的时候,insert方法暴露给用户的信息太多了。具体的插入流程其实不需要让用户实现。用户提供数据就行了。还有中序遍历的时候，其实没必要接收用户的参数(当然这个错是我故意这么写的，想个案例不容易啊/(ㄒoㄒ)/~~)</p>
<ul>
<li>修改之后</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">  val: <span class="built_in">number</span>;</span><br><span class="line">  left: <span class="literal">null</span> | TreeNode;</span><br><span class="line">  right: <span class="literal">null</span> | TreeNode;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">val:<span class="built_in">number</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val</span><br><span class="line">    <span class="built_in">this</span>.left = <span class="literal">null</span></span><br><span class="line">    <span class="built_in">this</span>.right = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义 二叉搜索树</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BSTree</span></span>&#123;</span><br><span class="line"> tree: <span class="literal">null</span> | TreeNode;</span><br><span class="line"> <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.tree = <span class="literal">null</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 改成接收 不定参数</span></span><br><span class="line"> <span class="comment">// 去掉返回值，让用户 只能有 new BSTree().tree 一种方式 获取的根节点</span></span><br><span class="line"> insert(...args:<span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt;):<span class="built_in">void</span>&#123;</span><br><span class="line">   <span class="keyword">let</span> handleInsert = <span class="function">(<span class="params">node:TreeNode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span>.tree === <span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="built_in">this</span>.tree = node</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> root = <span class="built_in">this</span>.tree</span><br><span class="line">      <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">          <span class="keyword">if</span>(node.val&gt;root.val)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root.right === <span class="literal">null</span>)&#123;</span><br><span class="line">              root.right = node</span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            root = root.right</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">            <span class="keyword">if</span>(root.left === <span class="literal">null</span>)&#123;</span><br><span class="line">              root.left = node</span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">          root = root.left</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  args.forEach(<span class="function"><span class="params">element</span> =&gt;</span>handleInsert(<span class="keyword">new</span> TreeNode(element)));</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 不需要接收参数</span></span><br><span class="line"> inOrder():<span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">let</span> res:<span class="built_in">number</span>[] = []</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">order</span>(<span class="params">tree:TreeNode|<span class="literal">null</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree === <span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> res     </span><br><span class="line">    &#125;</span><br><span class="line">    order(tree.left)</span><br><span class="line">    res.push(tree.val)</span><br><span class="line">    order(tree.right)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 改成 this.tree 直接引用内部的</span></span><br><span class="line">   order(<span class="built_in">this</span>.tree)</span><br><span class="line">   <span class="keyword">return</span> res</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现一个二叉搜索树的功能</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemeterImprove</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="title">main</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> bsTree = <span class="keyword">new</span> BSTree()</span><br><span class="line">      <span class="comment">// 插入元素 8 7 11 9 3 2</span></span><br><span class="line">      bsTree.insert(<span class="number">8</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">      <span class="keyword">let</span> res = bsTree.inOrder()</span><br><span class="line">      mlog.log(res) <span class="comment">// [2, 3, 7, 8, 9, 11]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="开始设计模式"><a class="markdownIt-Anchor" href="#开始设计模式"></a> 开始设计模式</h2>
<p>对于设计模式，大家公认有23种基本的设计模式，由于学的比较慢,这边目前只介绍单利模式和工厂模式,剩下的设计模式会慢慢的在后面的文章中，用TS实现。</p>
<h3 id="单例模式"><a class="markdownIt-Anchor" href="#单例模式"></a> 单例模式</h3>
<p>就是采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例， 并且该类只提供一个取得其对象实例的方法(静态方法)。</p>
<p>就是假如我们在一个系统中，需要频繁的使用某个对象，这时候如果反复的通过new，去实例化这个对象来使用，会造成不必要的内存损失。因此我们应该在对象内部提供静态属性等于实例化的这个类, 然后去通过类的静态属性获取实例化的类。案例如下</p>
<p>现在假如 我们有一个Person类，要多处调用Person中的 <code>sayHello</code> 方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Hello World JavaScript&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Person() === <span class="keyword">new</span> Person()) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>通过上述console.log中的比较结果知道，假如我们需要使用多次，那么每次都要占用一个新内存。通过改变代码如下,可见我们通过类本身的静态属性访问该类不要每次都实例化这个类。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> person = <span class="keyword">new</span> Person()</span><br><span class="line">  <span class="function"><span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Hello World JavaScript&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// es6目前没有私有属性可不提供，get方法</span></span><br><span class="line">  <span class="comment">// 在这里写了一个是模仿java，</span></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">getPerson</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.person</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Person.getPerson() === Person.getPerson()) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 或者直接一点</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.person === Person.person) <span class="comment">// true </span></span><br></pre></td></tr></table></figure>
<p>上面这种单例模式，属性java中的饿汉式，还有懒汉式，静态内部类实现，利用枚举实现等。主要是因为java的类装载机制。和线程安全问题，js暂时不用考虑这些问题 O(∩_∩)O哈哈~。</p>
<h3 id="工厂模式"><a class="markdownIt-Anchor" href="#工厂模式"></a> 工厂模式</h3>
<p>工厂模式很多情形其实是为了解决，设计违反了前面提到的 <strong>开闭原则的情景</strong> 。这种类型的设计模式属于<strong>创建型模式</strong>，它提供了一种创建对象的最佳方式。在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。</p>
<p><strong>优点：</strong> 1、一个调用者想创建一个对象，只要知道其名称就可以了。 2、扩展性高，如果想增加一个产品，只要扩展一个工厂类就可以。 3、屏蔽产品的具体实现，调用者只关心产品的接口。</p>
<p><strong>缺点：</strong> 每次增加一个产品时，都需要增加一个具体类和对象实现工厂，使得系统中类的个数成倍增加，在一定程度上增加了系统的复杂度，同时也增加了系统具体类的依赖。</p>
<p>从如下代码中优缺点显而易见，调用的时候很方便，去工厂取东西，不用关系工厂后面是怎么实现的。但是每次修改，工厂和工厂后面的实现都要改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简单工厂模式</span></span><br><span class="line">interface Shape&#123;</span><br><span class="line">  <span class="comment">// 定义一个表示形状的接口，里面有画的方法</span></span><br><span class="line">  draw()</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="title">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">draw</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我画了一个矩形&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Squre</span> <span class="title">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">draw</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我画了一个正方形&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="title">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">draw</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我画了一个圆形&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个工厂</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShapeFactory</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">getShape</span>(<span class="params">shapeType</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(shapeType === <span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(shapeType === <span class="string">&quot;CIRCLE&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Circle()</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(shapeType === <span class="string">&quot;RECTANGLE&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Rectangle()</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(shapeType === <span class="string">&quot;SQUARE&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Squre()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用层</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> shapeFactory = <span class="keyword">new</span> ShapeFactory()</span><br><span class="line">  <span class="keyword">let</span> circle = shapeFactory.getShape(<span class="string">&quot;CIRCLE&quot;</span>)</span><br><span class="line">  circle.draw() <span class="comment">// 我画了一个圆形</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>同样本篇是我看资料之后总结的。部分文字来源于网络</p>
</blockquote>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">琅琊旻</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wmwgithub.github.io/2020/02/26/typescript/">https://wmwgithub.github.io/2020/02/26/typescript/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wmwgithub.github.io">琅琊旻</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><a class="post-meta__tags" href="/tags/TypeScript/">TypeScript</a></div><div class="addthis_inline_share_toolbox pull-right"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e33bf91133aab4b" async></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/01/leetcode-297/"><i class="fa fa-chevron-left">  </i><span>二叉树的序列化与反序列化</span></a></div><div class="next-post pull-right"><a href="/2020/02/23/webpack/"><span>Webpack教程~基础篇</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '55b93500c699e46ecd3c',
  clientSecret: 'b30789a22c5e9d2d1cff1a0aeb9d2af82ff4c6d9',
  repo: 'wmwgithub.github.io',
  owner: 'wmwgithub',
  admin: 'wmwgithub',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 By 琅琊旻</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>